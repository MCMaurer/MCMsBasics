scale_y_continuous(..., trans = quantile_trans(val = .$x, prob, digits))
}
mtcars %>% ggplot(aes(x = wt, y = mpg)) + geom_point() + scale_y_quantile(aesthetics = "y")
#' Set the y axis scale to continuous with quantile breaks
#'
#' @param val: the column to calculate breaks from, ie mtcars$mpg
#' @param prob: a sequence of probability values, ie c(0, 0.5, 1) or seq(0, 1, 0.25)
#' @param digits: number of digits to round the quantiles to
#'
#' @return
#' @export
#' @import ggplot2
#'
scale_y_quantile <- function(val, prob = seq(0, 1, 0.25), digits = 1, aesthetics, ...) {
x <- !!aesthetics
scale_y_continuous(..., trans = quantile_trans(val = .$x, prob, digits))
}
mtcars %>% ggplot(aes(x = wt, y = mpg)) + geom_point() + scale_y_quantile(aesthetics = "y")
#' Set the y axis scale to continuous with quantile breaks
#'
#' @param val: the column to calculate breaks from, ie mtcars$mpg
#' @param prob: a sequence of probability values, ie c(0, 0.5, 1) or seq(0, 1, 0.25)
#' @param digits: number of digits to round the quantiles to
#'
#' @return
#' @export
#' @import ggplot2
#'
scale_y_quantile <- function(val, prob = seq(0, 1, 0.25), digits = 1, aesthetics, ...) {
x <- enquo(aesthetics)
scale_y_continuous(..., trans = quantile_trans(val = .$x, prob, digits))
}
mtcars %>% ggplot(aes(x = wt, y = mpg)) + geom_point() + scale_y_quantile(aesthetics = "y")
scale_y_continuous(..., trans = quantile_trans(val = mtcars$x, prob, digits))
#' Set the y axis scale to continuous with quantile breaks
#'
#' @param val: the column to calculate breaks from, ie mtcars$mpg
#' @param prob: a sequence of probability values, ie c(0, 0.5, 1) or seq(0, 1, 0.25)
#' @param digits: number of digits to round the quantiles to
#'
#' @return
#' @export
#' @import ggplot2
#'
scale_y_quantile <- function(val, prob = seq(0, 1, 0.25), digits = 1, aesthetics, ...) {
x <- enquo(aesthetics)
scale_y_continuous(..., trans = quantile_trans(val = mtcars$x, prob, digits))
}
mtcars %>% ggplot(aes(x = wt, y = mpg)) + geom_point() + scale_y_quantile(aesthetics = "y")
#' Set the y axis scale to continuous with quantile breaks
#'
#' @param val: the column to calculate breaks from, ie mtcars$mpg
#' @param prob: a sequence of probability values, ie c(0, 0.5, 1) or seq(0, 1, 0.25)
#' @param digits: number of digits to round the quantiles to
#'
#' @return
#' @export
#' @import ggplot2
#'
scale_y_quantile <- function(val, prob = seq(0, 1, 0.25), digits = 1, aesthetics, ...) {
scale_y_continuous(..., trans = quantile_trans(val = mtcars$!!aesthetics, prob, digits))
}
#' Set the y axis scale to continuous with quantile breaks
#'
#' @param val: the column to calculate breaks from, ie mtcars$mpg
#' @param prob: a sequence of probability values, ie c(0, 0.5, 1) or seq(0, 1, 0.25)
#' @param digits: number of digits to round the quantiles to
#'
#' @return
#' @export
#' @import ggplot2
#'
scale_y_quantile <- function(val, prob = seq(0, 1, 0.25), digits = 1, aesthetics, ...) {
x <- !!aesthetics
scale_y_continuous(..., trans = quantile_trans(val = mtcars$x, prob, digits))
}
mtcars %>% ggplot(aes(x = wt, y = mpg)) + geom_point() + scale_y_quantile(aesthetics = "y")
#' Set the y axis scale to continuous with quantile breaks
#'
#' @param val: the column to calculate breaks from, ie mtcars$mpg
#' @param prob: a sequence of probability values, ie c(0, 0.5, 1) or seq(0, 1, 0.25)
#' @param digits: number of digits to round the quantiles to
#'
#' @return
#' @export
#' @import ggplot2
#'
scale_y_quantile <- function(val, prob = seq(0, 1, 0.25), digits = 1, aesthetics, ...) {
x <- expr(aesthetics)
scale_y_continuous(..., trans = quantile_trans(val = mtcars$x, prob, digits))
}
mtcars %>% ggplot(aes(x = wt, y = mpg)) + geom_point() + scale_y_quantile(aesthetics = "y")
#' Set the y axis scale to continuous with quantile breaks
#'
#' @param val: the column to calculate breaks from, ie mtcars$mpg
#' @param prob: a sequence of probability values, ie c(0, 0.5, 1) or seq(0, 1, 0.25)
#' @param digits: number of digits to round the quantiles to
#'
#' @return
#' @export
#' @import ggplot2
#'
scale_y_quantile <- function(val, prob = seq(0, 1, 0.25), digits = 1, ...) {
scale_y_continuous(..., trans = quantile_trans(val, prob, digits))
}
#' Set the y axis scale to continuous with quantile breaks
#'
#' @param val: the column to calculate breaks from, ie mtcars$mpg
#' @param prob: a sequence of probability values, ie c(0, 0.5, 1) or seq(0, 1, 0.25)
#' @param digits: number of digits to round the quantiles to
#'
#' @return
#' @export
#' @import ggplot2
#'
scale_y_quantile <- function(val, prob = seq(0, 1, 0.25), digits = 1, ...) {
scale_y_continuous(..., trans = quantile_trans(val = mtcars$val, prob, digits))
}
mtcars %>% ggplot(aes(x = wt, y = mpg)) + geom_point() + scale_y_quantile(val = mpg)
mtcars %>% ggplot(aes(x = wt, y = mpg)) + geom_point() + scale_y_quantile(val = "mpg")
mtcars %>% ggplot(aes(x = wt, y = mpg)) + geom_point() + scale_y_quantile(val = "mpg")
mtcars %>% ggplot(aes(x = wt, y = mpg)) + geom_point() + scale_y_quantile(val = "mpg")
#' Set the y axis scale to continuous with quantile breaks
#'
#' @param val: the column to calculate breaks from, ie mtcars$mpg
#' @param prob: a sequence of probability values, ie c(0, 0.5, 1) or seq(0, 1, 0.25)
#' @param digits: number of digits to round the quantiles to
#'
#' @return
#' @export
#' @import ggplot2
#'
scale_y_quantile <- function(val, prob = seq(0, 1, 0.25), digits = 1, ...) {
scale_y_continuous(..., trans = quantile_trans(val, prob, digits))
}
mtcars %>% ggplot(aes(x = wt, y = mpg)) + geom_point() + scale_y_quantile(val = mtcars$mpg)
p <- mtcars %>% ggplot(aes(x = wt, y = mpg)) + geom_point()
p
p$mapping$x
library(tidyverse)
test <- tibble(height = rexp(20, 10), time = 1:20)
test[c(4, 11, 12, 17, 19),1] <- NA
test %>%
mutate(gap = case_when((is.na(lag(height)) |
is.na(lead(height))) &
!is.na(height) &
time != min(time) ~ TRUE,
(!is.na(lag(height)) |
!is.na(lead(height))) & !is.na(height) ~ FALSE,
TRUE ~ NA),
two_groups = is.na(lag(height)) &
is.na(lead(height)) &
time != min(time) &
time != max(time)) %>%
bind_rows(., filter(., two_groups)) %>%
arrange(time) %>%
group_by(gap) %>%
mutate(group = ceiling(row_number()/2)) %>%
ungroup() %>%
mutate(gap = ifelse(gap, group, NA)) %>%
ggplot(aes(x = time, y = height)) +
geom_point() +
geom_line() +
geom_line(data = . %>% filter(!is.na(height), gap > 0), aes(group = gap), lty = "dashed") +
theme_bw()
library(tidyverse)
test <- tibble(height = rexp(20, 10), time = 1:20)
test[c(4, 11, 12, 17, 19),1] <- NA
test %>%
mutate(gap = case_when((is.na(lag(height)) |
is.na(lead(height))) &
!is.na(height) &
time != min(time) ~ TRUE,
(!is.na(lag(height)) |
!is.na(lead(height))) & !is.na(height) ~ FALSE,
TRUE ~ NA),
two_groups = is.na(lag(height)) &
is.na(lead(height)) &
time != min(time) &
time != max(time)) %>%
bind_rows(., filter(., two_groups)) %>%
arrange(time) %>%
group_by(gap) %>%
mutate(group = ceiling(row_number()/2)) %>%
ungroup() %>%
mutate(gap = ifelse(gap, group, NA)) %>%
ggplot(aes(x = time, y = height)) +
geom_point() +
geom_line() +
geom_line(data = . %>% filter(!is.na(height), gap > 0), aes(group = gap), lty = "dashed") +
theme_bw()
library(tidyverse)
library(dplyr)
test <- tibble(height = rexp(20, 10), time = 1:20)
test[c(4, 11, 12, 17, 19),1] <- NA
test %>%
mutate(gap = case_when((is.na(lag(height)) |
is.na(lead(height))) &
!is.na(height) &
time != min(time) ~ TRUE,
(!is.na(lag(height)) |
!is.na(lead(height))) & !is.na(height) ~ FALSE,
TRUE ~ NA),
two_groups = is.na(lag(height)) &
is.na(lead(height)) &
time != min(time) &
time != max(time)) %>%
bind_rows(., filter(., two_groups)) %>%
arrange(time) %>%
group_by(gap) %>%
mutate(group = ceiling(row_number()/2)) %>%
ungroup() %>%
mutate(gap = ifelse(gap, group, NA)) %>%
ggplot(aes(x = time, y = height)) +
geom_point() +
geom_line() +
geom_line(data = . %>% filter(!is.na(height), gap > 0), aes(group = gap), lty = "dashed") +
theme_bw()
library(ggplot2)
test <- tibble(height = rexp(20, 10), time = 1:20)
test[c(4, 11, 12, 17, 19),1] <- NA
test %>%
mutate(gap = case_when((is.na(lag(height)) |
is.na(lead(height))) &
!is.na(height) &
time != min(time) ~ TRUE,
(!is.na(lag(height)) |
!is.na(lead(height))) & !is.na(height) ~ FALSE,
TRUE ~ NA),
two_groups = is.na(lag(height)) &
is.na(lead(height)) &
time != min(time) &
time != max(time)) %>%
bind_rows(., filter(., two_groups)) %>%
arrange(time) %>%
group_by(gap) %>%
mutate(group = ceiling(row_number()/2)) %>%
ungroup() %>%
mutate(gap = ifelse(gap, group, NA)) %>%
ggplot(aes(x = time, y = height)) +
geom_point() +
geom_line() +
geom_line(data = . %>% filter(!is.na(height), gap > 0), aes(group = gap), lty = "dashed") +
theme_bw()
library(dplyr)
library(ggplot2)
test <- tibble(height = rexp(20, 10), time = 1:20)
test[c(4, 11, 12, 17, 19),1] <- NA
test %>%
mutate(gap = case_when((is.na(lag(height)) |
is.na(lead(height))) &
!is.na(height) &
time != min(time) ~ TRUE,
(!is.na(lag(height)) |
!is.na(lead(height))) & !is.na(height) ~ FALSE,
TRUE ~ NA),
two_groups = is.na(lag(height)) &
is.na(lead(height)) &
time != min(time) &
time != max(time)) %>%
bind_rows(., filter(., two_groups)) %>%
arrange(time) %>%
group_by(gap) %>%
mutate(group = ceiling(row_number()/2)) %>%
ungroup() %>%
mutate(gap = ifelse(gap, group, NA)) %>%
ggplot(aes(x = time, y = height)) +
geom_point() +
geom_line() +
geom_line(data = . %>% filter(!is.na(height), gap > 0), aes(group = gap), lty = "dashed") +
theme_bw()
mtcars
iris
devtools::build()
install.packages(c("akima", "ape", "aws.signature", "backports", "bayesplot", "benchmarkme", "blogdown", "bookdown", "brms", "broman", "car", "carData", "countrycode", "dbplyr", "DiagrammeR", "dplyr", "effectsize", "ellipsis", "emmeans", "fitdistrplus", "foreign", "gargle", "gender", "ggplot2", "ggraph", "ggspatial", "glue", "gmp", "googledrive", "googlesheets4", "haven", "HDInterval", "httpuv", "insight", "jomo", "jsonify", "keras", "later", "lwgeom", "mapdeck", "maptools", "mice", "mnormt", "modelr", "modelStudio", "ncmeta", "nlme", "officer", "openxlsx", "parameters", "pdftools", "pillar", "pkgbuild", "pkgload", "ps", "RcppArmadillo", "renv", "reticulate", "rgdal", "rgeos", "rmarkdown", "rsample", "rversions", "RWiener", "scales", "servr", "sf", "sfheaders", "showtext", "showtextdb", "sjlabelled", "sjmisc", "sjPlot", "sjstats", "slider", "sp", "SQUAREM", "StanHeaders", "sysfonts", "systemfonts", "tensorflow", "tidygraph", "tidyr", "tidyselect", "tinytex", "tufte", "V8", "vctrs", "xfun"))
install.packages(c("boot", "class", "foreign", "KernSmooth", "MASS", "nlme", "nnet", "spatial"), lib="/Users/MJ/GitHub/MCMsBasics/packrat/lib-R/x86_64-apple-darwin17.0/4.0.0")
install.packages(c("boot", "class", "foreign", "KernSmooth", "MASS", "nlme", "nnet", "spatial"), lib="/Users/MJ/GitHub/MCMsBasics/packrat/lib-R/x86_64-apple-darwin17.0/4.0.0")
packrat::snapshot(prompt = FALSE)
packrat::restore(prompt = FALSE)
packrat::restore(prompt = FALSE)
library(MCMsBasics)
nice_names()
quantile_breaks()
nice_names
library(MCMsBasics)
nice_names
nice_names()
roxygen2::roxygenise()
install.packages(c("devtools", "roxygen2"))
library(MCMsBasics)
install.packages("dplyr")
library(MCMsBasics)
nice_names()
roxygen2::roxygenise()
library(MCMsBasics)
nice_names()
iris %>% nice_names()
nice_names(iris)
nice_names(mtcars)
iris %>%
rename_all(~ str_to_lower(.) %>%
str_replace_all(., " ", "_") %>%
str_replace_all(., ".", "_")
)
library(tidyverse)
library(dplyr)
library(magrittr)
library(stringr)
iris %>%
rename_all(~ str_to_lower(.) %>%
str_replace_all(., " ", "_") %>%
str_replace_all(., ".", "_")
)
iris %>%
rename_all(~ str_to_lower(.) %>%
str_replace_all(., " ", "_")
)
iris %>%
rename_all(~ str_to_lower(.) %>%
str_replace_all(., " ", "_") %>%
)
iris %>%
rename_all(~ str_to_lower(.) %>%
str_replace_all(., " ", "_") %>%
str_replace_all(., "\.", "_")
)
iris %>%
rename_all(~ str_to_lower(.) %>%
str_replace_all(., " ", "_") %>%
str_replace_all(., "\\.", "_")
)
library(MCMsBasics)
nice_names(iris)
roxygen2::roxygenise()
install.packages("tidyr")
library(MCMsBasics)
roxygen2::roxygenise()
library(MCMsBasics)
iris %>% ggskim()
ggskim(mtcars)
ggskim
ggskim(iris)
ggskim(mtcars, plot = F)
rlang::last_error()
library(dplyr)
library(tidyr)
library(ggplot2)
.data <- mtcars
d_num <- .data %>%
select_if(is.numeric) %>%
pivot_longer(cols = everything(),
names_to = "column",
values_to = "value")
d_num
d_num %>%
ggplot(aes(x = value)) +
geom_histogram() +
facet_wrap(vars(column), scales = "free")
d_num %>%
ggplot(aes(x = value)) +
geom_histogram()
d_num
d_num %>%
ggplot(aes(x = value)) +
geom_histogram()
range(d_num$value)
d_num %>%
filter(column == "mpg") %>%
ggplot(aes(x = value)) +
geom_histogram() +
facet_wrap(vars(column), scales = "free")
d_num %>%
filter(column == "mpg") %>%
ggplot(aes(x = value)) +
geom_histogram()
d_num %>%
filter(column == "mpg") %>%
ggplot(aes(x = value)) +
geom_histogram(binwidth = 2)
d_num %>%
filter(column == "mpg") %>%
ggplot(aes(x = value)) +
geom_point()
d_num %>%
filter(column == "mpg") %>%
ggplot(aes(x = value, y = 1)) +
geom_point()
d_num
d_num %>%
ggplot(aes(x = value)) +
geom_histogram()
str(d_num)
d_num %>%
ggplot(aes(x = value)) +
geom_histogram()
str(d_num)
d_num
d_num2 <- as_tibble(d_num)
d_num2 %>%
ggplot(aes(x = value)) +
geom_histogram()
d_num2 %>%
ggplot(aes(x = value)) +
geom_histogram()
d_num
d_num$value
library(dplyr)
library(tidyr)
library(ggplot2)
.data <- mtcars
d_num <- .data %>%
select_if(is.numeric) %>%
pivot_longer(cols = everything(),
names_to = "column",
values_to = "value")
d_num2$value <- d_num$vvalue
d_num2$value <- d_num$value
d_num <- data.frame()
d_num2$value <- d_num$value
d_num <- .data %>%
select_if(is.numeric) %>%
pivot_longer(cols = everything(),
names_to = "column",
values_to = "value")
d_num2 <- data.frame()
d_num2$value <- d_num$value
d_num2 <- data.frame(column = d_num$column, value = d_num$value)
d_num2 %>%
ggplot(aes(x = value)) +
geom_histogram()
d_num2 <- data.frame(column = d_num$column, value = as.double(d_num$value))
d_num2 %>%
ggplot(aes(x = value)) +
geom_histogram()
d_num2 <- data.frame(column_2 = d_num$column, value_2 = as.double(d_num$value))
d_num2 %>%
ggplot(aes(x = value_2)) +
geom_histogram()
d_num2 %>%
ggplot(aes(x = value_2)) +
geom_histogram()
ggplot() +
geom_histogram(data = d_num2, mapping = aes(x = value_2))
library(magrittr)
library(dplyr)
library(tidyr)
library(ggplot2)
.data <- mtcars
d_num <- .data %>%
select_if(is.numeric) %>%
pivot_longer(cols = everything(),
names_to = "column",
values_to = "value")
d_num$value
d_num2 <- data.frame(column_2 = d_num$column, value_2 = as.double(d_num$value))
d_num2 %>%
ggplot(aes(x = value_2)) +
geom_histogram()
d_num2 %>%
ggplot(aes(x = value_2)) +
geom_histogram()
install.packages("units")
d_num2 %>%
ggplot(aes(x = value_2)) +
geom_histogram()
roxygen2::roxygenise()
roxygen2::roxygenise()
roxygen2::roxygenise()
installed.packages()
install.packages("dplyr")
install.packages("ggplot2")
install.packages("stringr")
install.packages("tidyr")
library(MCMsBasics)
library(MCMsBasics)
roxy
install.packages("roxygen2")
roxygen2::roxygenise()
library(MCMsBasics)
MCMsBasics::ggskim
ggskim(mtcars)
library(MCMsBasics)
library(MCMsBasics)
install.packages("devtools")
packrat::install()
installed.packages()
packrat::disable()
?packrat::disable
packrat::init()
library(MCMsBasics)
roxygen2::roxygenise()
library(MCMsBasics)
rnorm(1000) %>% tibble(val = .) %>% ggplot2::aes(x = val) + ggplot2::geom_histogram()
library(tidyverse)
library(dplyr)
rnorm(1000) %>% tibble(val = .) %>% ggplot2::aes(x = val) + ggplot2::geom_histogram()
rnorm(1000) %>% tibble(val = .) %>% ggplot2::aes(x = val) + ggplot2::geom_histogram()
rnorm(1000) %>% tibble(val = .) %>% ggplot2::ggplot(ggplot2::aes(x = val)) + ggplot2::geom_histogram()
rnorm(1000) %>% tibble(val = .) %>% ggplot2::ggplot(ggplot2::aes(x = val)) + ggplot2::geom_histogram(bins = 100/3)
rnorm(1000) %>% tibble(val = .) %>% ggplot2::ggplot(ggplot2::aes(x = val)) + ggplot2::geom_histogram(bins = 1000/3)
rnorm(1000) %>% tibble(val = .) %>% ggplot2::ggplot(ggplot2::aes(x = val)) + ggplot2::geom_histogram(bins = 1000/5)
rnorm(1000) %>% tibble(val = .) %>% ggplot2::ggplot(ggplot2::aes(x = val)) + ggplot2::geom_histogram(bins = 1000/10)
rnorm(1000) %>% tibble(val = .) %>% ggplot2::ggplot(ggplot2::aes(x = val)) + ggplot2::geom_histogram(bins = 1000/15)
rnorm(1000) %>% tibble(val = .) %>% ggplot2::ggplot(ggplot2::aes(x = val)) + ggplot2::geom_histogram(bins = 1000/20)
roxygen2::roxygenise()
library(MCMsBasics)
roxygen2::roxygenize()
gghist()
gghist(rnorm(1000))
gghist(rnorm(1000))
library(MCMsBasics)
roxygen2::roxygenize()
